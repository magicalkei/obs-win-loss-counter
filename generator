<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OBS Win/Loss Counter Custom CSS Generator v1.9</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Anton&family=Bangers&family=Black+Ops+One&family=Dela+Gothic+One&family=DotGothic16&family=M+PLUS+1p:wght@100..900&family=Noto+Sans+JP:wght@100..900&family=Orbitron:wght@400..900&family=Potta+One&family=Roboto:wght@100..900&display=swap" rel="stylesheet">

<style>
  /* --- ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« --- */
  body {
    background-color: #1a1a1a;
    color: #eee;
    font-family: "Helvetica Neue", Arial, sans-serif;
    margin: 0; padding: 20px;
  }
  .gen-container {
    max-width: 800px; margin: 0 auto;
    border: 1px solid #444; padding: 15px 20px;
    background: #2b2b2b; border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
  }
  h3 {
    margin-top: 0; border-bottom: 1px solid #555; padding-bottom: 10px; margin-bottom: 15px;
    display: flex; justify-content: space-between; align-items: center; font-size: 1.2rem;
  }
  .version-tag {
    font-size: 0.8rem; background: #f39c12; color: white;
    padding: 2px 8px; border-radius: 12px; font-weight: bold;
  }
  
  /* --- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ --- */
  .preview-box {
    background-image: linear-gradient(45deg, #444 25%, transparent 25%, transparent 75%, #444 75%),
                      linear-gradient(45deg, #444 25%, transparent 25%, transparent 75%, #444 75%);
    background-size: 20px 20px; background-position: 0 0, 10px 10px;
    background-color: #333;
    padding: 20px; margin-bottom: 15px; border-radius: 4px;
    border: 2px solid #555; min-height: 120px;
    display: flex; justify-content: center; align-items: center;
    overflow: hidden;
  }
  .preview-row {
    display: grid; 
    grid-template-columns: 45px 80px 25px 80px; 
    gap: 0;
    align-items: center; justify-content: start; width: fit-content;
    font-family: 'Impact', sans-serif; font-style: italic;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    font-variant-numeric: tabular-nums; letter-spacing: 1px; line-height: 1.0;
    padding: 5px 0; border-radius: 4px; transition: background-color 0.2s;
  }
  .preview-item { text-align: center; margin: 0; padding: 0; white-space: nowrap; }
  .preview-slash { transform: skew(-10deg); }

  /* --- æ“ä½œãƒ‘ãƒãƒ« (ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆåŒ–) --- */
  .controls {
    display: flex; flex-direction: column; gap: 10px; margin-bottom: 15px;
  }

  /* è¡Œï¼ˆæ¨ªä¸¦ã³ã‚³ãƒ³ãƒ†ãƒŠï¼‰ */
  .control-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
  }
  /* 3åˆ—ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¡Œ */
  .control-row.triple {
      grid-template-columns: 1fr 1fr 1fr;
  }
  @media (max-width: 600px) { 
      .control-row, .control-row.triple { grid-template-columns: 1fr; gap: 10px; } 
  }

  .section-label {
      font-size: 0.75rem; color: #888; border-bottom: 1px solid #444; 
      margin-top: 5px; margin-bottom: 5px; padding-bottom: 2px;
  }

  .control-group { display: flex; flex-direction: column; }
  .control-group label {
    font-size: 0.8rem; font-weight: bold; margin-bottom: 3px; color: #ccc;
    display: flex; justify-content: space-between; align-items: center;
  }
  .note { font-size: 0.7rem; color: #ffeb3b; font-weight: normal; margin-left: 5px; }

  /* UIãƒ‘ãƒ¼ãƒ„ã®ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆåŒ– */
  input[type="color"] { width: 100%; height: 30px; cursor: pointer; border: none; padding: 0; background: none; }
  input[type="range"] { width: 100%; cursor: pointer; margin: 5px 0 0 0; }
  select { padding: 6px; border-radius: 4px; border: 1px solid #555; background: #eee; font-size: 0.85rem; }
  
  .checkbox-group {
      display: flex; gap: 15px; background: #333; padding: 8px; border-radius: 4px; border: 1px solid #555; align-items: center;
  }
  .checkbox-wrapper {
      display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 0.85rem;
  }
  .checkbox-wrapper input { cursor: pointer; transform: scale(1.1); }
  
  .slider-val { font-weight: normal; font-size: 0.8em; color: #aaa; }

  /* å‡ºåŠ›ã‚¨ãƒªã‚¢ */
  textarea.css-output {
    width: 100%; height: 150px; 
    font-family: monospace; padding: 10px; font-size: 0.85rem;
    background: #111; color: #0f0; border: 1px solid #555; border-radius: 4px;
    resize: none; box-sizing: border-box;
  }
  .copy-btn {
    width: 100%; padding: 10px; background: #1e90ff; color: white;
    border: none; border-radius: 4px; font-weight: bold; cursor: pointer;
    margin-top: 5px; font-size: 0.95rem; transition: background 0.2s;
  }
  .copy-btn:hover { background: #0077e6; }
</style>
</head>
<body>

<div class="gen-container">
  <h3>
    ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
    <span class="version-tag">v1.9</span>
  </h3>
  
  <div class="preview-box">
    <div id="preview-target" class="preview-row">
      <span class="preview-item p-label">T</span>
      <span class="preview-item p-w-num">15</span>
      <span class="preview-item p-slash">/</span>
      <span class="preview-item p-l-num">29</span>
    </div>
  </div>

  <div class="controls">
    <div class="section-label">ã‚«ãƒ©ãƒ¼è¨­å®š</div>
    <div class="control-row triple">
        <div class="control-group">
          <label>WIN</label>
          <input type="color" id="input-win-color" value="#ff4757" oninput="generateCSS()">
        </div>
        <div class="control-group">
          <label>LOSS</label>
          <input type="color" id="input-loss-color" value="#1e90ff" oninput="generateCSS()">
        </div>
        <div class="control-group">
            <label>æ–‡å­—ãƒ»è¨˜å·</label>
            <input type="color" id="input-text-color" value="#ffffff" oninput="generateCSS()">
        </div>
    </div>
    
    <div class="control-row">
        <div class="control-group">
            <label>èƒŒæ™¯è‰² <span class="note">â€»æ¿ƒã•ã¯OBSã§èª¿æ•´</span></label>
            <div style="display: flex; gap: 5px; align-items: center;">
                <input type="color" id="input-bg-color" value="#000000" style="width: 35%;" oninput="generateCSS()">
                <input type="range" id="input-bg-opacity" min="0" max="1" step="0.1" value="0.5" style="width: 65%;" oninput="generateCSS()">
            </div>
            <div style="text-align: right; font-size: 0.7em; color: #aaa;">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: <span id="opacity-val">50%</span></div>
        </div>
        <div class="control-group">
            <label>ãƒ•ã‚©ãƒ³ãƒˆ</label>
            <select id="input-font" onchange="generateCSS()" style="width:100%;">
                <option value="">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ (Impact)</option>
                
                <optgroup label="ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰">
                    <option value="'Roboto', sans-serif">Roboto</option>
                    <option value="'Noto Sans JP', sans-serif">Noto Sans JP</option>
                    <option value="'Meiryo', sans-serif">ãƒ¡ã‚¤ãƒªã‚ª</option>
                </optgroup>

                <optgroup label="ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥ãƒ»ãƒ¢ãƒ€ãƒ³">
                    <option value="'Anton', sans-serif">Anton (ç¸¦é•·ã‚¹ãƒãƒ¼ãƒˆ)</option>
                    <option value="'M PLUS 1p', sans-serif">M PLUS 1p (ãƒ¢ãƒ€ãƒ³ä¸¸ã‚´ã‚·ãƒƒã‚¯)</option>
                </optgroup>

                <optgroup label="SFãƒ»ãƒŸãƒªã‚¿ãƒªãƒ¼">
                    <option value="'Orbitron', sans-serif">Orbitron (SFãƒ»è¿‘æœªæ¥)</option>
                    <option value="'Black Ops One', cursive">Black Ops One (ãƒŸãƒªã‚¿ãƒªãƒ¼)</option>
                </optgroup>

                <optgroup label="ãƒãƒƒãƒ—ãƒ»ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ">
                    <option value="'Bangers', cursive">Bangers (ã‚¢ãƒ¡ã‚³ãƒŸé¢¨)</option>
                    <option value="'Dela Gothic One', cursive">Dela Gothic One (æ¥µå¤ª)</option>
                    <option value="'Potta One', cursive">Potta One (ç­†æ–‡å­—ãƒãƒƒãƒ—)</option>
                </optgroup>

                <optgroup label="ãƒ¬ãƒˆãƒ­">
                    <option value="'DotGothic16', sans-serif">DotGothic16 (ãƒ‰ãƒƒãƒˆçµµ)</option>
                </optgroup>
            </select>
        </div>
    </div>

    <div class="section-label">ã‚¹ã‚¿ã‚¤ãƒ«ãƒ»è£…é£¾</div>
    <div class="control-group">
        <div class="checkbox-group">
            <label class="checkbox-wrapper">
                <input type="checkbox" id="input-italic" checked onchange="generateCSS()">
                <span>æ–œä½“ (Italic)</span>
            </label>
            <label class="checkbox-wrapper">
                <input type="checkbox" id="input-shadow" checked onchange="generateCSS()">
                <span>å½± (Shadow)</span>
            </label>
        </div>
    </div>

    <div class="control-row">
        <div class="control-group">
            <label>å¤ªã• <span id="weight-val" class="slider-val">900</span></label>
            <input type="range" id="input-weight" min="100" max="900" step="100" value="900" oninput="generateCSS()">
        </div>
        <div class="control-group">
            <label>ã‚µã‚¤ã‚º <span id="size-val" class="slider-val">38px</span></label>
            <input type="range" id="input-size" min="20" max="100" value="38" oninput="generateCSS()">
        </div>
    </div>

    <div class="control-row">
        <div class="control-group">
            <label>åˆ—ã®æ¨ªå¹… <span id="width-scale-val" class="slider-val">1.0å€</span></label>
            <input type="range" id="input-width-scale" min="0.8" max="2.0" step="0.1" value="1.0" oninput="generateCSS()">
        </div>
        <div class="control-group">
            <label>ä¸Šä¸‹ä½™ç™½ <span id="padding-y-val" class="slider-val">5px</span></label>
            <input type="range" id="input-padding-y" min="0" max="30" step="1" value="5" oninput="generateCSS()">
        </div>
    </div>

    <div class="control-row">
        <div class="control-group">
            <label>ç¸å–ã‚Šå¤ªã• <span id="border-width-val" class="slider-val">0px</span></label>
            <input type="range" id="input-border-width" min="0" max="6" step="0.5" value="0" oninput="generateCSS()">
        </div>
        <div class="control-group">
            <label>ç¸å–ã‚Šè‰²</label>
            <input type="color" id="input-border-color" value="#000000" oninput="generateCSS()">
        </div>
    </div>
  </div>

  <div>
    <label style="font-size:0.8rem; font-weight:bold; color:#ccc;">CSSã‚³ãƒ¼ãƒ‰ (OBSç”¨)</label>
    <textarea id="css-result" class="css-output" readonly onclick="this.select()"></textarea>
    <button class="copy-btn" onclick="copyCSS()">CSSã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
  </div>
</div>

<script>
  function hexToRgb(hex) {
    const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? {
      r: parseInt(result[1], 16),
      g: parseInt(result[2], 16),
      b: parseInt(result[3], 16)
    } : null;
  }

  function getFontUrl(fontFamily) {
      if (!fontFamily) return "";
      if (fontFamily.includes("Noto Sans JP")) return "family=Noto+Sans+JP:wght@100..900";
      if (fontFamily.includes("M PLUS 1p")) return "family=M+PLUS+1p:wght@100..900";
      if (fontFamily.includes("Roboto")) return "family=Roboto:wght@100..900";
      if (fontFamily.includes("Orbitron")) return "family=Orbitron:wght@400..900";
      if (fontFamily.includes("Dela Gothic One")) return "family=Dela+Gothic+One";
      if (fontFamily.includes("Potta One")) return "family=Potta+One";
      if (fontFamily.includes("DotGothic16")) return "family=DotGothic16";
      if (fontFamily.includes("Anton")) return "family=Anton";
      if (fontFamily.includes("Bangers")) return "family=Bangers";
      if (fontFamily.includes("Black Ops One")) return "family=Black+Ops+One";
      return "";
  }

  function generateCSS() {
    // å€¤å–å¾—
    const winColor = document.getElementById('input-win-color').value;
    const lossColor = document.getElementById('input-loss-color').value;
    const textColor = document.getElementById('input-text-color').value;
    const bgColorHex = document.getElementById('input-bg-color').value;
    const bgOpacity = document.getElementById('input-bg-opacity').value;
    
    const fontSize = document.getElementById('input-size').value;
    const fontVal = document.getElementById('input-font').value;
    const fontWeight = document.getElementById('input-weight').value;
    const borderWidth = document.getElementById('input-border-width').value;
    const borderColor = document.getElementById('input-border-color').value;
    const widthScale = document.getElementById('input-width-scale').value;
    const paddingY = document.getElementById('input-padding-y').value;
    
    const isItalic = document.getElementById('input-italic').checked;
    const hasShadow = document.getElementById('input-shadow').checked;

    // UIæ›´æ–°
    document.getElementById('size-val').textContent = fontSize + 'px';
    document.getElementById('opacity-val').textContent = Math.round(bgOpacity * 100) + '%';
    document.getElementById('weight-val').textContent = fontWeight;
    document.getElementById('border-width-val').textContent = borderWidth + 'px';
    document.getElementById('width-scale-val').textContent = widthScale + 'å€';
    document.getElementById('padding-y-val').textContent = paddingY + 'px';
    
    const rgb = hexToRgb(bgColorHex);
    const rgbString = `${rgb.r}, ${rgb.g}, ${rgb.b}`; 
    const previewRgba = `rgba(${rgbString}, ${bgOpacity})`;

    // --- A. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼åæ˜  ---
    const row = document.getElementById('preview-target');
    const wEl = row.querySelector('.p-w-num');
    const lEl = row.querySelector('.p-l-num');
    const labelEl = row.querySelector('.p-label');
    const slashEl = row.querySelector('.p-slash');

    row.style.fontSize = fontSize + 'px';
    row.style.backgroundColor = previewRgba;
    row.style.padding = `${paddingY}px 0`; 
    row.style.lineHeight = "1.0"; 

    const col1 = 45 * widthScale;
    const col2 = 80 * widthScale;
    const col3 = 25 * widthScale;
    const col4 = 80 * widthScale;
    row.style.gridTemplateColumns = `${col1}px ${col2}px ${col3}px ${col4}px`;

    if(fontVal) {
        row.style.fontFamily = fontVal.replace(/'/g, ""); 
    } else {
        row.style.fontFamily = "'Impact', sans-serif";
    }
    
    row.style.fontWeight = fontWeight;
    row.style.fontStyle = isItalic ? 'italic' : 'normal';
    
    if (hasShadow) {
        row.style.textShadow = "2px 2px 4px rgba(0,0,0,0.8)";
    } else {
        row.style.textShadow = "none";
    }

    const strokeStyle = borderWidth > 0 ? `${borderWidth}px ${borderColor}` : '';
    row.style.webkitTextStroke = strokeStyle;
    row.style.paintOrder = "stroke fill";

    wEl.style.color = winColor;
    lEl.style.color = lossColor;
    labelEl.style.color = textColor;
    slashEl.style.color = textColor;

    // --- B. CSSã‚³ãƒ¼ãƒ‰ç”Ÿæˆ ---
    const fontUrlParam = getFontUrl(fontVal);
    let importStr = "";
    if (fontUrlParam) {
        importStr = `@import url('https://fonts.googleapis.com/css2?${fontUrlParam}&display=swap');\n`;
    }

    let styleCss = "";
    if (fontVal) styleCss += `    font-family: ${fontVal} !important;\n`;
    styleCss += `    font-weight: ${fontWeight} !important;\n`;
    if (!isItalic) styleCss += `    font-style: normal !important;\n`;
    if (!hasShadow) styleCss += `    text-shadow: none !important;\n`;

    let borderCss = "";
    if (borderWidth > 0) {
        borderCss = `
/* æ–‡å­—ã®ç¸å–ã‚Š */
#display-ui .display-row, 
#display-ui .display-row > span {
    -webkit-text-stroke-width: ${borderWidth}px !important;
    -webkit-text-stroke-color: ${borderColor} !important;
    paint-order: stroke fill !important; 
}`;
    }

    let bgCss = `
/* èƒŒæ™¯è‰²ã®RGBå€¤ã‚’å¤‰æ›´ (æ¿ƒã•ã¯OBSã§èª¿æ•´) */
#display-ui .display-row {
    --bg-rgb: ${rgbString} !important;
}`;

    let layoutCss = `
/* ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ */
#display-ui .display-row {
    height: auto !important;
    min-height: 1.0em !important;
    align-items: center !important;
    line-height: 1.0 !important;
    padding-top: ${paddingY}px !important;
    padding-bottom: ${paddingY}px !important;
    grid-template-columns: ${col1}px ${col2}px ${col3}px ${col4}px !important;
    width: fit-content !important;
}`;

    // v1.8 ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾© (WINã®ã¿è‰²å¤‰æ›´)
    let animCss = `
/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©ã®ä¸Šæ›¸ã */

/* WIN: æ‹¡å¤§ã—ã¦ç™½ãå…‰ã‚‹ */
@keyframes pop { 
    0% { transform: scale(1); } 
    50% { transform: scale(1.3); color: #ffffff; text-shadow: 0 0 10px rgba(255,255,255,0.8); -webkit-text-stroke: 0px; } 
    100% { transform: scale(1); } 
}

/* LOSS: å·¦å³ã«æºã‚Œã‚‹ã ã‘ï¼ˆè‰²ã¯å¤‰ãˆãªã„ï¼‰ */
@keyframes shake { 
    0% { transform: translateX(0); } 
    20% { transform: translateX(-4px); } 
    40% { transform: translateX(4px); } 
    60% { transform: translateX(-4px); } 
    80% { transform: translateX(4px); } 
    100% { transform: translateX(0); } 
}`;

    let css = `${importStr}
/* --- ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š (Generator v1.9) --- */
${bgCss}
${layoutCss} 

/* ãƒ•ã‚©ãƒ³ãƒˆãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ä¸€æ‹¬è¨­å®š */
#display-ui .display-row, 
#display-ui .display-row > span {
    font-size: ${fontSize}px !important;
${styleCss}}
${borderCss}

/* å‹ã¡ (WIN) ã®è‰² */
#display-ui .display-row .w-num {
    color: ${winColor};
}

/* è² ã‘ (LOSS) ã®è‰² */
#display-ui .display-row .l-num {
    color: ${lossColor};
}

/* ãƒ­ãƒ¼ãƒ«åã¨ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã®è‰² */
#display-ui .display-row .label, 
#display-ui .display-row .slash {
    color: ${textColor} !important;
    opacity: 1 !important;
}

/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š */
${animCss}
`;

    document.getElementById('css-result').value = css;
  }

  function copyCSS() {
    const copyText = document.getElementById("css-result");
    copyText.select();
    document.execCommand("copy");
    
    const btn = document.querySelector('.copy-btn');
    const originalText = btn.innerText;
    btn.innerText = "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼";
    btn.style.background = "#2ecc71";
    setTimeout(() => {
        btn.innerText = originalText;
        btn.style.background = "#1e90ff";
    }, 2000);
  }

  generateCSS();
</script>

</body>
</html>
